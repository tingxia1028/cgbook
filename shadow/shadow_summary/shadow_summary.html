
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Real-Time Shadow Summary · GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../assignment/assignment.html" />
    
    
    <link rel="prev" href="../resource.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../../space_trans/resource.html">
            
                <a href="../../space_trans/resource.html">
            
                    
                    Space Transformation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../camera/resource.html">
            
                <a href="../../camera/resource.html">
            
                    
                    Camera
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../camera/photography/photography.html">
            
                <a href="../../camera/photography/photography.html">
            
                    
                    科学解释摄影中的一些概念
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../../ray_tracing/resource.html">
            
                <a href="../../ray_tracing/resource.html">
            
                    
                    Ray Tracing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../volume/resource.html">
            
                <a href="../../volume/resource.html">
            
                    
                    Volume Rendering
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../../volume/volume_rendering/volume_rendering.html">
            
                <a href="../../volume/volume_rendering/volume_rendering.html">
            
                    
                    Volume Rendering Basic Theory
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../GI/resource.html">
            
                <a href="../../GI/resource.html">
            
                    
                    GI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../../GI/GI_draft/GI_draft.html">
            
                <a href="../../GI/GI_draft/GI_draft.html">
            
                    
                    GI Draft
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../../GI/precompute/resource.html">
            
                <a href="../../GI/precompute/resource.html">
            
                    
                    Precomputed Based GI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../../GI/voxel_based/resource.html">
            
                <a href="../../GI/voxel_based/resource.html">
            
                    
                    Voxel Based GI
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../../GI/distance_field/resource.html">
            
                <a href="../../GI/distance_field/resource.html">
            
                    
                    Distance Field
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../pbr/resource.html">
            
                <a href="../../pbr/resource.html">
            
                    
                    PBR
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../../pbr/material/resource.html">
            
                <a href="../../pbr/material/resource.html">
            
                    
                    Material
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../../pbr/lighting/resource.html">
            
                <a href="../../pbr/lighting/resource.html">
            
                    
                    Lighting
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.2.1" data-path="../../pbr/lighting/filament_base_lighting/filament_base_lighting.html">
            
                <a href="../../pbr/lighting/filament_base_lighting/filament_base_lighting.html">
            
                    
                    Filament Basic Physical Lighting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../light/resource.html">
            
                <a href="../../light/resource.html">
            
                    
                    Light
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" >
            
                <span>
            
                    
                    Area Light
            
                </span>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../color/resource.html">
            
                <a href="../../color/resource.html">
            
                    
                    Color
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../resource.html">
            
                <a href="../resource.html">
            
                    
                    Shadow
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.10.1" data-path="shadow_summary.html">
            
                <a href="shadow_summary.html">
            
                    
                    Real-Time Shadow Summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../assignment/assignment.html">
            
                <a href="../assignment/assignment.html">
            
                    
                    games202 shadow assignment
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../../texture/resource.html">
            
                <a href="../../texture/resource.html">
            
                    
                    Texture
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../../texture/multiple_textures/multiple_textures.html">
            
                <a href="../../texture/multiple_textures/multiple_textures.html">
            
                    
                    Multiple Textures
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../../texture/multiple_textures/virtual_textures.md">
            
                <span>
            
                    
                    Virtual Texture
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    Pipeline
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../../pipeline/visibility/resource.html">
            
                <a href="../../pipeline/visibility/resource.html">
            
                    
                    Dynamic Visibility
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1.1" data-path="../../pipeline/visibility/dynamic_visibility_draft/draft.html">
            
                <a href="../../pipeline/visibility/dynamic_visibility_draft/draft.html">
            
                    
                    Dynamic Visibility Draft
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../../pipeline/cs/resource.html">
            
                <a href="../../pipeline/cs/resource.html">
            
                    
                    Compute Shader
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../../pipeline/gpudriven/resource.html">
            
                <a href="../../pipeline/gpudriven/resource.html">
            
                    
                    GPU Driven Rendering
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.3.1" data-path="../../pipeline/gpudriven/oc/oc.html">
            
                <a href="../../pipeline/gpudriven/oc/oc.html">
            
                    
                    GPU Driven Occlusion Culling
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../../pipeline/cb/resource.html">
            
                <a href="../../pipeline/cb/resource.html">
            
                    
                    Checkerboard
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" >
            
                <span>
            
                    
                    Structure
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../../structure/framegraph/resource.html">
            
                <a href="../../structure/framegraph/resource.html">
            
                    
                    Frame Graph
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../../structure/ecs/resource.html">
            
                <a href="../../structure/ecs/resource.html">
            
                    
                    ECS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <span>
            
                    
                    Graphics API
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1" data-path="../../api/dx/resource.md">
            
                <span>
            
                    
                    DirectX
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.14.1.1" data-path="../../api/dx/multi_indirect_draw/resource.html">
            
                <a href="../../api/dx/multi_indirect_draw/resource.html">
            
                    
                    Multi-Indirect Draw
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../../special_effect/atmosphere/resource.html">
            
                <a href="../../special_effect/atmosphere/resource.html">
            
                    
                    Atmosphere
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../../special_effect/atmosphere/resource.html">
            
                <a href="../../special_effect/atmosphere/resource.html">
            
                    
                    Atmosphere
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1.1" data-path="../../special_effect/atmosphere/ue_ray_marching/ue.html">
            
                <a href="../../special_effect/atmosphere/ue_ray_marching/ue.html">
            
                    
                    A Scalable and Production Ready Sky and Atmosphere Rendering Technique
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15.1.2" data-path="../../special_effect/atmosphere/multi_scattering/multi_scattering.html">
            
                <a href="../../special_effect/atmosphere/multi_scattering/multi_scattering.html">
            
                    
                    multi-scattering计算的一些思考
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.15.2" data-path="../../special_effect/cloud/resource.html">
            
                <a href="../../special_effect/cloud/resource.html">
            
                    
                    Cloud
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" >
            
                <span>
            
                    
                    Engine
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../../engine/filament/resource.html">
            
                <a href="../../engine/filament/resource.html">
            
                    
                    Filament
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1.1" data-path="../../pbr/lighting/filament_base_lighting/filament_base_lighting.html">
            
                <a href="../../pbr/lighting/filament_base_lighting/filament_base_lighting.html">
            
                    
                    Basic Physical Lighting
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="../../engine/ue/resource.html">
            
                <a href="../../engine/ue/resource.html">
            
                    
                    Unreal
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Real-Time Shadow Summary</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="real-time-shadow-summary">real-time shadow summary</h1>
<ul>
<li><a href="#%E8%A1%A5%E7%82%B9%E5%B8%B8%E8%AF%86%E5%90%A7">&#x8865;&#x70B9;&#x5E38;&#x8BC6;&#x5427;</a><ul>
<li><a href="#basic-things">basic things</a></li>
<li><a href="#soft-shadow">soft shadow</a></li>
<li><a href="#the-math-behind-shadow-mapping">The math behind shadow mapping</a></li>
</ul>
</li>
<li><a href="#state-of-art">state of art</a><ul>
<li><a href="#projection-shadow">projection shadow</a></li>
<li><a href="#projective-texture-mapping">projective texture mapping</a></li>
<li><a href="#shadow-volume">shadow volume</a></li>
<li><a href="#shadow-maps">shadow maps</a><ul>
<li><a href="#basic-principle">basic principle</a></li>
<li><a href="#shadow-map-problems-and-solutions">shadow map problems and solutions</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E8%BD%AF%E9%98%B4%E5%BD%B1">&#x8F6F;&#x9634;&#x5F71;</a><ul>
<li><a href="#pcfpercentage-closer-filtering">PCF(Percentage-Closer Filtering)</a></li>
<li><a href="#pcsspercentage-closer-soft-shadows">PCSS(Percentage-Closer Soft Shadows)</a></li>
<li><a href="#filtered-shadow-map">filtered shadow map</a><ul>
<li><a href="#vsmvariance-shadow-map">VSM(Variance Shadow Map)</a></li>
<li><a href="#csm-convolution-shadow-mapping--esmexponential-shadow-map">CSM (Convolution Shadow Mapping) &amp; ESM(Exponential Shadow Map)</a></li>
<li><a href="#moment-shadow-mapping">Moment Shadow Mapping</a></li>
<li><a href="#sdfsigned-distance-field">SDF(Signed Distance Field)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#volumetric--shadow-technique">volumetric  shadow technique</a><ul>
<li><a href="#transparency-depth-map">transparency depth map</a></li>
<li><a href="#deep-shadow-maps">deep shadow maps</a></li>
<li><a href="#opacity-shadow-mapsadaptive-volumetric-shadow-maps">opacity shadow maps&#xFF0C;adaptive volumetric shadow maps&#xFF0C;</a></li>
</ul>
</li>
</ul>
<h2 id="&#x8865;&#x70B9;&#x5E38;&#x8BC6;&#x5427;">&#x8865;&#x70B9;&#x5E38;&#x8BC6;&#x5427;</h2>
<h3 id="basic-things">basic things</h3>
<p><a href="https://www.youtube.com/watch?v=AbyHtfDG8ME" target="_blank">https://www.youtube.com/watch?v=AbyHtfDG8ME</a></p>
<ul>
<li>light</li>
<li>luminous object</li>
<li>transparent, translucent and opaque objects</li>
<li>light travels a straight way</li>
<li>occlusion cause shadow<h3 id="soft-shadow">soft shadow</h3>
<a href="https://blog.demofox.org/2017/07/01/why-are-some-shadows-soft-and-other-shadows-hard/" target="_blank">https://blog.demofox.org/2017/07/01/why-are-some-shadows-soft-and-other-shadows-hard/</a>
<img src="1608434607656.png" alt="Alt text"><pre><code>soft shadow &#x5E76;&#x4E0D;&#x662F;&#x7B80;&#x5355;&#x7684;&#x8FB9;&#x7F18;blur, &#x4ECE;&#x5F62;&#x6210;&#x539F;&#x7406;&#x4E0A;&#x770B;umbra&#x548C;&#x8DDD;&#x79BB;&#x5149;&#x6E90;&#x7684;&#x8FDC;&#x8FD1;&#x8FD8;&#x6709;&#x5149;&#x6E90;&#x7684;&#x5927;&#x5C0F;&#x90FD;&#x6709;&#x5173;&#x7CFB;
</code></pre><h3 id="the-math-behind-shadow-mapping">The math behind shadow mapping</h3>
<img src="1621074455335.png" alt="Alt text"></li>
</ul>
<h2 id="state-of-art">state of art</h2>
<h3 id="projection-shadow">projection shadow</h3>
<p><img src="1621039761497.png" alt="Alt text">
 simply apply this matrix to the objects that should cast shadows on the plane &#x3C0;, and render this projected object with a dark color and no illumination.</p>
<ul>
<li>&#x8003;&#x8651;&#x53EF;&#x80FD;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;<ul>
<li>&#x9634;&#x5F71;&#x7ED8;&#x5236;&#x5728;&#x4E86;&#x5E73;&#x9762;&#x7684;&#x4E0B;&#x9762;  --&gt; &#x7ED8;&#x5236;&#x987A;&#x5E8F; or shadow map</li>
<li>ground plane&#x6709;&#x8FB9;&#x754C;&#xFF0C;&#x9634;&#x5F71;&#x7ED8;&#x5728;&#x4E86;&#x8FB9;&#x754C;&#x5916;  --&gt; stencil</li>
<li>&#x5149;&#x6E90;&#x5904;&#x4E8E;shadow caster&#x548C;receiver&#x4E4B;&#x95F4;&#x5BFC;&#x81F4;anti-shadow  --&gt; projection with clipping</li>
</ul>
</li>
<li>soft shadow<ul>
<li>&#x9762;&#x5149;&#x6E90;&#x91C7;&#x6837;&#x5F97;&#x5230;&#x4E00;&#x4E2A;punctual light, &#x6E32;&#x67D3;&#x9634;&#x5F71;&#xFF0C;sum and average</li>
<li>&#x901A;&#x8FC7;filtering&#x53BB;blur hard shadow</li>
<li>renders the silhouette edges with gradients that go from dark in the center to white on the edges</li>
</ul>
</li>
</ul>
<h3 id="projective-texture-mapping">projective texture mapping</h3>
<p>the occluder is rendered in black from the light&#x2019;s viewpoint into an otherwise white texture.
&#x4EE5;&#x4E0A;&#x4E24;&#x4E2A;projection&#x7684;&#x65B9;&#x6CD5;&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;</p>
<ul>
<li>identify which objects are occluders and which are their receivers</li>
<li>occluding objects cannot shadow themselves</li>
</ul>
<h3 id="shadow-volume">shadow volume</h3>
<p> <img src="1608451366928.png" alt="Alt text">
the count is incremented as a ray passes through a frontfacing triangle of a shadow volume and decremented on leaving through a backfacing triangle.
 &#x4E24;&#x4E2A;pass&#xFF1A;</p>
<ul>
<li>&#x4E00;&#x4E2A;pass&#x53EA;&#x753B;front face&#xFF0C;&#x66F4;&#x65B0;stencil buffer +1</li>
<li>&#x4E00;&#x4E2A;pass&#x53EA;&#x753B;back face&#xFF0C;&#x66F4;&#x65B0;stencil buffer-1
&#x5B58;&#x5728;&#x7684;&#x95EE;&#x9898;&#xFF1A;</li>
<li>&#x6BCF;&#x4E2A;&#x4E09;&#x89D2;&#x9762;&#x7247;&#x90FD;&#x8981;&#x751F;&#x6210;&#x4E00;&#x4E2A;shadow volume&#x8BA1;&#x7B97;&#x91CF;&#x592A;&#x5927;</li>
<li>&#x53D7;&#x89C6;&#x89D2;&#x65B9;&#x5411;&#x548C;&#x5149;&#x7167;&#x65B9;&#x5411;&#x5F71;&#x54CD;&#x5F88;&#x5927;</li>
</ul>
<h3 id="shadow-maps">shadow maps</h3>
<h4 id="basic-principle">basic principle</h4>
<p> <img src="1608452394577.png" alt="Alt text">
from the light&apos;s point of view.</p>
<ul>
<li><p>texture </p>
<ul>
<li>DEPTH textures are usually of 24bits but they could be of 32bits</li>
<li><p>encode the depth as a color</p>
<pre><code class="lang-cpp">  //coverts a value from [0..1] into RGBA
vec4 PackDepth32( in float depth )
{
    depth *= (256.0*256.0*256.0 - 1.0) / (256.0*256.0*256.0);
    vec4 encode = fract( depth * vec4(1.0, 256.0, 256.0*256.0, 256.0*256.0*256.0) );
    return vec4( encode.xyz - encode.yzw / 256.0, encode.w ) + 1.0/512.0;
}

//coverts a RGBA into a float [0..1]
float UnpackDepth32( in vec4 pack )
{
    float depth = dot( pack, 1.0/vec4(1.0, 256.0, 256.0*256.0, 256.0*256.0*256.0) );
    return depth * (256.0*256.0*256.0) / (256.0*256.0*256.0 - 1.0);
}
</code></pre>
</li>
</ul>
</li>
<li>shadow view  --&gt;  shadowmap camera viewprojection matrix<ul>
<li>directional light 
orthographic view</li>
<li>spot light
perspective view</li>
<li>poInt light
cube map, 6 times perspective view</li>
</ul>
</li>
<li>reprojecting to shadow map
when projecting a point using a projection matrix the result is in homogeneous coordinates, and we need to divide by the resulting .w to pass to clip-space coordinates.</li>
<li>comparing depth
dx11 sampleCmp &#x53EF;&#x4EE5;&#x5728;&#x91C7;&#x6837;&#x7684;&#x65F6;&#x5019;&#x8FDB;&#x884C;&#x6BD4;&#x8F83;&#x8F93;&#x51FA;[0,1]&#x7684;&#x503C;</li>
</ul>
<h4 id="shadow-map-problems-and-solutions">shadow map problems and solutions</h4>
<ul>
<li>shadow acne<ul>
<li>slope scale bias
Bias&#x6839;&#x636E;&#x7269;&#x4F53;&#x7684;normal&#x548C;&#x5149;&#x7167;&#x65B9;&#x5411;&#x5939;&#x89D2;&#x51B3;&#x5B9A;&#xFF0C;&#x5939;&#x89D2;&#x8D8A;&#x5C0F;&#xFF0C;bias&#x8D8A;&#x5C0F;&#x3002;</li>
<li>normal o&#xFB00;set bias
&#x9884;&#x5148;&#x5C06;&#x7269;&#x4F53;&#x7684;position&#x5EF6;normal&#x65B9;&#x5411;&#x79FB;&#x52A8;&#x4E00;&#x4E2A;bias&#xFF0C;bias&#x548C;normal&#x548C;&#x5149;&#x65B9;&#x5411;&#x5939;&#x89D2;&#x6210;&#x6B63;&#x6BD4;&#x3002;</li>
</ul>
</li>
<li>light leaks /  peter panning<ul>
<li>front face culling</li>
</ul>
</li>
<li>perspective aliasing and projective aliasing
<img src="1621069322084.png" alt="Alt text">
 &#x79BB;viewer&#x66F4;&#x8FD1;&#x7684;&#x533A;&#x57DF;&#x5728;shadow map&#x4F7F;&#x7528;&#x66F4;&#x591A;&#x7684;&#x91C7;&#x6837;<ul>
<li>&#x589E;&#x5927;shadow map&#x7684;resolution</li>
<li>matrix-warping techniques
&#x66F4;&#x6539;light&#x7684;camera&#x7684;&#x53C2;&#x6570;
<img src="1608456717650.png" alt="Alt text"><ul>
<li>PCM(Perspective Shadow Maps)
<img src="1621071985403.png" alt="Alt text"></li>
<li>Light Space Perspective Shadow Maps(LiPSM)</li>
<li>Trapezoidal Shadow Maps(TSM)
<img src="1621071798065.png" alt="Alt text"></li>
</ul>
</li>
<li>cascade shadow
<img src="1608456762658.png" alt="Alt text"></li>
</ul>
</li>
</ul>
<h2 id="&#x8F6F;&#x9634;&#x5F71;">&#x8F6F;&#x9634;&#x5F71;</h2>
<h3 id="pcfpercentage-closer-filtering">PCF(Percentage-Closer Filtering)</h3>
<p> retrieving multiple samples from a shadow map and blending the results, to &#xFB01;nd the percentage of the samples taken that are visible to the light.
 PCF&#x4F1A;&#x8003;&#x8651;&#x4EE5;&#x4E0B;&#x51E0;&#x4E2A;variations</p>
<ul>
<li>&#x91C7;&#x6837;&#x8303;&#x56F4;&#x5927;&#x5C0F;</li>
<li>&#x91C7;&#x6837;&#x6570;</li>
<li>&#x91C7;&#x6837;&#x70B9;&#x5982;&#x4F55;&#x9009;&#x53D6;</li>
<li>&#x91C7;&#x6837;&#x7ED3;&#x679C;&#x6743;&#x91CD;
&#x901A;&#x5E38;&#xFF0C;&#x91C7;&#x6837;randomly rotated Poisson distribution&#x53EF;&#x4EE5;&#x5F97;&#x5230;&#x6BD4;&#x8F83;&#x597D;&#x7684;&#x6548;&#x679C;&#x3002;</li>
</ul>
<h3 id="pcsspercentage-closer-soft-shadows">PCSS(Percentage-Closer Soft Shadows)</h3>
<p> &#x57FA;&#x4E8E;&#x7684;&#x4E3B;&#x8981;&#x5047;&#x8BBE;&#x662F;the average blocker is a reasonable estimate of the penumbra size.
The average distance of these occluders from the location is used to determine the sample area width.
The width of the surface area to the sample grows as the average occluder gets farther from the receiver and closer to the light.
<img src="1621079601033.png" alt="Alt text">
<img src="1621079241581.png" alt="Alt text">
<img src="1621079283613.png" alt="Alt text"></p>
<h3 id="filtered-shadow-map">filtered shadow map</h3>
<h4 id="vsmvariance-shadow-map">VSM(Variance Shadow Map)</h4>
<ul>
<li>&#x57FA;&#x672C;&#x5047;&#x8BBE;
receiver&#x662F;&#x4E00;&#x4E2A;&#x5E73;&#x9762;&#x3002;</li>
<li><p>&#x57FA;&#x672C;&#x539F;&#x7406;
&#x5F97;&#x5230;&#x4E00;&#x4E2A;an upper bound on the visibility percentage of the receiver. &#x4E3A;&#x4E86;&#x63D0;&#x5347;PCF&#x7684;&#x7B2C;&#x4E09;&#x6B65;&#x7684;&#x6548;&#x7387;&#x3002;
<img src="1621125552424.png" alt="Alt text">
<img src="1621125587639.png" alt="Alt text">
<img src="1621125694575.png" alt="Alt text">
&#x8FD9;&#x4E2A;&#x4E0D;&#x7B49;&#x5F0F;&#x7406;&#x8BBA;&#x4E0A;&#x53EA;&#x6709;t&#x5728;&#x5747;&#x503C;&#x7684;&#x53F3;&#x4FA7;&#x624D;&#x6B63;&#x786E;&#x3002;
<img src="1621125923741.png" alt="Alt text">
<img src="1621125730070.png" alt="Alt text">
PCSS&#x7B2C;&#x4E00;&#x6B65;&#x4E2D;&#x7684;the average depth of blockers&#x662F;&#x5982;&#x4F55;&#x8FD1;&#x4F3C;&#x7684;&#xFF1F;
<img src="1621125765738.png" alt="Alt text"></p>
</li>
<li><p>&#x5982;&#x4F55;&#x5F97;&#x5230;average&#x4FE1;&#x606F;
MIPMAP and Summed Area Table (SAT)
<img src="1621126252923.png" alt="Alt text"></p>
</li>
<li><p>&#x4F18;&#x70B9;
VSM can work with just a single, high-quality sample to determine the entire area&#x2019;s e&#xFB00;ect and produce a smooth penumbra</p>
</li>
<li><p>&#x7F3A;&#x70B9;
 two or more occluders cover a receiver and one occluder is close to the receiver. 
 &#x5C31;&#x662F;&#x5927;&#x591A;&#x6570;occluders&#x6CA1;&#x6709;&#x906E;&#x6321;&#xFF0C;&#x4F46;&#x662F;&#x6709;&#x4E00;&#x4E2A;&#x906E;&#x6321;&#x4E86;&#xFF0C;&#x56E0;&#x4E3A;&#x662F;&#x6C42;&#x5E73;&#x5747;&#xFF0C;&#x6240;&#x4EE5;&#x4F1A;&#x51FA;&#x73B0;light bleeding (a.k.a. light leaks).</p>
</li>
</ul>
<h4 id="csm-convolution-shadow-mapping--esmexponential-shadow-map">CSM (Convolution Shadow Mapping) &amp; ESM(Exponential Shadow Map)</h4>
<p>&#x628A;shadow&#x51FD;&#x6570;&#x7528;&#x5E42;&#x51FD;&#x6570;&#x6765;&#x5EFA;&#x6A21;&#xFF1A;
<img src="1621210324776.png" alt="Alt text">
<img src="1621210268510.png" alt="Alt text">
&#x7136;&#x540E;&#x7528;convolution&#x6765;&#x505A;filtering&#xFF0C;&#x8FD9;&#x4E2A;filtering&#x8FC7;&#x7684;&#x503C;&#x5C31;&#x4E0D;&#x662F;&#x975E;0&#x5373;1&#xFF0C;&#x6709;&#x4E86;&#x4E2D;&#x95F4;&#x503C;&#x5373;soft shadow.
<img src="1621210359444.png" alt="Alt text"></p>
<h4 id="moment-shadow-mapping">Moment Shadow Mapping</h4>
<ul>
<li>&#x57FA;&#x672C;&#x601D;&#x8DEF;
Use higher order moments to represent a distribution</li>
<li><p>&#x57FA;&#x672C;&#x539F;&#x7406;
 &#x77E9;
<img src="1621210799615.png" alt="Alt text"></p>
<p><img src="1621210869084.png" alt="Alt text"></p>
</li>
<li>&#x7F3A;&#x70B9;<ul>
<li>Costly storage (might be fine)</li>
<li>Costly performance (in the reconstruction)</li>
</ul>
</li>
</ul>
<h4 id="sdfsigned-distance-field">SDF(Signed Distance Field)</h4>
<ul>
<li>&#x57FA;&#x672C;&#x539F;&#x7406;
<img src="1621251388188.png" alt="Alt text">
<img src="1621251450572.png" alt="Alt text">
<img src="1621252375451.png" alt="Alt text">
 &#x4E0D;&#x540C;&#x7684;k&#x51B3;&#x5B9A;&#x7684;&#x9634;&#x5F71;&#x6709;&#x591A;soft<pre><code class="lang-cpp">  <span class="hljs-function"><span class="hljs-keyword">float</span> <span class="hljs-title">softshadow</span><span class="hljs-params">( in vec3 ro, in vec3 rd, <span class="hljs-keyword">float</span> mint, <span class="hljs-keyword">float</span> maxt, <span class="hljs-keyword">float</span> k )</span>
  </span>{
      <span class="hljs-keyword">float</span> res = <span class="hljs-number">1.0</span>;
      <span class="hljs-keyword">for</span>( <span class="hljs-keyword">float</span> t=mint; t &lt; maxt; )
      {
          <span class="hljs-keyword">float</span> h = <span class="hljs-built_in">map</span>(ro + rd*t);
          <span class="hljs-keyword">if</span>( h&lt;<span class="hljs-number">0.001</span> )
              <span class="hljs-keyword">return</span> <span class="hljs-number">0.0</span>;
          res = min( res, k*h/t );
          t += h;
      }
      <span class="hljs-keyword">return</span> res;
  }
</code></pre>
</li>
<li>&#x4F18;&#x70B9;<ul>
<li>Fast</li>
<li>High quality</li>
</ul>
</li>
<li>&#x7F3A;&#x70B9;<ul>
<li>Need precomputation</li>
<li>Need heavy storage</li>
<li>Artifact<ul>
<li>&#x590D;&#x6742;&#x51E0;&#x4F55;&#x4E0B;&#x4EA7;&#x51FA;&#x7684;banding effects
<img src="1621252618129.png" alt="Alt text">
<img src="1621252631082.png" alt="Alt text"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="volumetric--shadow-technique">volumetric  shadow technique</h2>
<h3 id="transparency-depth-map">transparency depth map</h3>
<p>The transparent objects are rendered to it, and the closest depth and color or alpha coverage is stored.
&#x7F3A;&#x70B9;&#x662F;&#x900F;&#x660E;&#x7269;&#x4F53;&#x7684;&#x81EA;&#x9634;&#x5F71;&#x5B9E;&#x73B0;&#x4E0D;&#x4E86;&#x3002;</p>
<h3 id="deep-shadow-maps">deep shadow maps</h3>
<p>each shadow-map texel stores a function of how light drops o&#xFB00; with depth.
This function is typically approximated by a series of samples at di&#xFB00;erent depths, with each sample having an opacity value.
&#x6BCF;&#x4E2A;shadow map pixel &#x5B58;&#x82E5;&#x5E72;&#x4E2A;&#x6DF1;&#x5EA6;&#x503C;&#x548C;alpha&#x3002;</p>
<h3 id="opacity-shadow-maps&#xFF0C;adaptive-volumetric-shadow-maps&#xFF0C;">opacity shadow maps&#xFF0C;adaptive volumetric shadow maps&#xFF0C;</h3>
<p>&#x57FA;&#x672C;&#x90FD;&#x662F;&#x5728;deep shadow maps&#x7684;&#x57FA;&#x7840;&#x4E0A;&#x505A;&#x4E86;&#x4E00;&#x4E9B;&#x5EF6;&#x4F38;&#x548C;&#x62D3;&#x5C55;&#x3002;</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../resource.html" class="navigation navigation-prev " aria-label="Previous page: Shadow">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../assignment/assignment.html" class="navigation navigation-next " aria-label="Next page: games202 shadow assignment">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Real-Time Shadow Summary","level":"1.10.1","depth":2,"next":{"title":"games202 shadow assignment","level":"1.10.2","depth":2,"path":"shadow/assignment/assignment.md","ref":"shadow/assignment/assignment.md","articles":[]},"previous":{"title":"Shadow","level":"1.10","depth":1,"path":"shadow/resource.md","ref":"shadow/resource.md","articles":[{"title":"Real-Time Shadow Summary","level":"1.10.1","depth":2,"path":"shadow/shadow_summary/shadow_summary.md","ref":"shadow/shadow_summary/shadow_summary.md","articles":[]},{"title":"games202 shadow assignment","level":"1.10.2","depth":2,"path":"shadow/assignment/assignment.md","ref":"shadow/assignment/assignment.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"shadow/shadow_summary/shadow_summary.md","mtime":"2021-05-17T12:04:49.544Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-05-17T12:06:20.365Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

